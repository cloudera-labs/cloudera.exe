---
# Copyright 2025 Cloudera, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

argument_specs:
  main:
    short_description: Install and configure Cloudera MiNiFi Java Agent
    description:
      - Downloads, installs, and configures Cloudera MiNiFi Java Agent on the target host.
      - Sets up the MiNiFi properties, and manages the systemd service.
    author: Cloudera Labs
    version_added: "3.3.0"
    options:
      minifi_java_tarball_url:
        description: URL to the MiNiFi Java tarball to download and install.
        type: str
        required: false
        default: "https://archive.cloudera.com/p/cem-agents/1.25.05-h2/ubuntu22/apt/tars/nifi-minifi-java/nifi-minifi-java-1.25.05-h2-b5-bin-linux.tar.gz"
      minifi_java_directory:
        description: Directory where MiNiFi Java will be installed.
        type: str
        required: false
        default: "/opt/cloudera/cem/minifi-java"
      minifi_java_properties_path:
        description: Path to the MiNiFi Java properties file.
        type: str
        required: false
        default: "/opt/cloudera/cem/minifi-java/conf/minifi.properties"
      minifi_java_agent_class_name:
        description: Agent class name for MiNiFi Java agent.
        type: str
        required: false
        default: "minifi-agent-java2"
      efm_api_url:
        description: URL for the Edge Flow Manager API.
        type: str
        required: false
        default: "http://localhost:10090/efm/api"
      minifi_java_repo_username:
        description: Username for protected Minifi repositories.
        type: str
        required: false
      minifi_java_repo_password:
        description: Password for protected Minifi repositories.
        type: str
        required: false
      efm_host_url:
        description: URL for the Edge Flow Manager server for C2 communication.
        type: str
        default: "http://localhost:10090"
      minifi_tls_enabled:
        description: Enable or disable TLS for MiNiFi Java agent.
        type: bool
        default: false
      minifi_tls_client_certificate:
        description: Path to the client certificate file for TLS authentication.
        type: str
        default: "/etc/pki/tls/certs/host.crt"
      minifi_tls_client_private_key:
        description: Path to the client private key file for TLS authentication.
        type: str
        default: "/etc/pki/tls/private/host.key"
      minifi_tls_client_ca_certificate:
        description: Path to the CA certificate file for TLS authentication.
        type: str
        default: "/etc/ipa/ca.crt"
      minifi_java_service_path:
        description: Path to the systemd service file for MiNiFi Java.
        type: str
        required: false
        default: "/etc/systemd/system/minifi-java.service"
      minifi_tls_keystore_path:
        description: Path to the keystore file for TLS configuration.
        type: str
        required: false
      minifi_tls_keystore_type:
        description: Type of the keystore (e.g., JKS, PKCS12).
        type: str
        required: false
      minifi_tls_keystore_password:
        description: Password for the keystore file.
        type: str
        required: false
      minifi_tls_key_password:
        description: Password for the private key in the keystore.
        type: str
        required: false
      minifi_tls_truststore_path:
        description: Path to the truststore file for TLS configuration.
        type: str
        required: false
      minifi_tls_truststore_type:
        description: Type of the truststore (e.g., JKS, PKCS12).
        type: str
        required: false
      minifi_tls_truststore_password:
        description: Password for the truststore file.
        type: str
        required: false
      minifi_tls_ssl_protocol:
        description: SSL protocol to use for TLS communication (e.g., TLSv1.2).
        type: str
        required: false
