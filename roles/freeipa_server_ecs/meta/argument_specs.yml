---
# Copyright 2025 Cloudera, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

argument_specs:
  main:
    short_description: Configure DNS zones and wildcard records for ECS
    description:
      - Ensures that DNS zones and wildcard records are set up in FreeIPA for ECS.
      - Creates a specified DNS zone and adds wildcard DNS records.
    author: Cloudera Labs
    version_added: 3.0.0
    options:
      ipaadmin_password:
        description: FreeIPA admin password used for authentication.
        required: true
      ipaadmin_principal:
        description: FreeIPA admin principal used for authentication.
        default: admin
      ipaserver_host:
        description: Hostname or IP address of the FreeIPA server.
        default: C(inventory_hostname)
      ipaserver_domain:
        description: The FreeIPA domain to use for creating the DNS zone and records.
        required: true
      freeipa_dns_records:
        description: DNS records to create within the FreeIPA domain, i.e. DNS zone.
        type: list
        elements: dict
        options:
          zone_name:
            description: Name of the DNS zone to create the record in.
            required: true
          record_name:
            description: Name of the DNS record (use C(*) for a wildcard record).
            required: true
          record_type:
            description: Type of the DNS record (e.g., A, AAAA).
            required: true
        default:
          - zone_name: "apps.C(ipaserver_domain)"
            record_name: "*"
            record_type: "A"
          - zone_name: "C(ipaserver_domain)"
            record_name: "*"
            record_type: "A"
      freeipa_dns_records_address:
        description: DNS records target IP address for the records defined in O(freeipa_dns_records).
        type: str
        required: true
      dnszone_skip_overlap_check:
        description: Skip overlap check when creating DNS zones.
        type: bool
        required: false
        default: false
      ipaapi_context:
        description: The FreeIPA role of the host where the DNS Zone creation will execute.
        type: str
        required: false
        choices:
          - client
          - server
